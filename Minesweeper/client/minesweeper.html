<!DOCTYPE html>
<html>
<head>
	<meta charset="ISO-8859-1">
	<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="main.css">
	<title>Minesweeper solver</title>
</head>
<body>

    <h1>Minesweeper solver</h1>
    <div style="overflow: auto;">
        <nav id="controls">

            <div class="checkboxes">
                <label><input type="checkbox" class="checkbox" id="useSeed" /> <span>Use seed</span></label>
            </div>

            <div height="10">
            </div>

            <div style="margin-bottom: 1em;">
                <input id="seed" type="text" style="width: 150px" />
            </div>

            <div style="margin-bottom: 1em;">
                <input id="gameTypeSafe" type="radio" name="gameType" value="safe" checked> Safe start<br>
                <input id="gameTypeZero" type="radio" name="gameType" value="zero"> Zero start<br>
            </div>

            <button onclick="doNewGame(8, 8, 10)">Beginner</button>
            <button onclick="doNewGame(16, 16, 40)">Intermediate</button>
            <button onclick="doNewGame(30, 16, 99)">Expert</button>

            <div>
                <label style="width: 90px">Width:</label>
                <input id="width" type="text" style="width: 100px" />
                <label style="width: 90px">Height:</label>
                <input id="height" type="text" style="width: 100px" />
                <label style="width: 90px">Mines:</label>
                <input id="mines" type="text" style="width: 100px" />
            </div>

            <button onclick="apply()">Custom</button>

            <div class="checkboxes" style="margin-top: 1em;">
                <label><input type="checkbox" class="checkbox" id="showhints" /> <span>Show hints</span></label>
                <label><input type="checkbox" class="checkbox" id="autoplay" /> <span>Auto play</span></label>
                <label><input type="checkbox" class="checkbox" id="acceptguesses" /> <span>Accept guesses</span></label>
            </div>

        </nav>

        <section id="canvas">
            <div id="display">
                <canvas id="myMinesLeft" width="96" height="40" oncontextmenu="return false"></canvas>
            </div>
            <div class="tooltip" id="board" style="position:relative; width: 512px; height: 512px">
                <span id="tooltip" class="tooltiptext" style="pointer-events: none;">Tooltip text</span>
                <canvas id="myCanvas" width="500" height="500" oncontextmenu="return false" style="position: absolute; top: 0; left: 0;"></canvas>
                <canvas id="myHints" width="500" height="500" oncontextmenu="return false" style="position: absolute; top: 0; left: 0; pointer-events: none;"></canvas>
            </div>
        </section>
    </div>

    <script src="main.js" type="text/javascript"></script>
    <script src="Board.js" type="text/javascript"></script>
    <script src="Tile.js" type="text/javascript"></script>

    <script src="solver_main.js" type="text/javascript"></script>
    <script src="solver_probability_engine.js" type="text/javascript"></script>
    <script src="Brute_force.js" type="text/javascript"></script>
    <script src="BruteForceAnalysis.js" type="text/javascript"></script>
    <script src="mineServer.js" type="text/javascript"></script>

    <script type="text/javascript">
        function apply() {

            const MAX_WIDTH = 100;
            const MAX_HEIGHT = 100;

            var widthX = document.getElementById("width").value;
            var heightX = document.getElementById("height").value;
            var minesX = document.getElementById("mines").value;

            if (isNaN(widthX)) {
                return;
            }
            if (isNaN(heightX)) {
                return;
            }
            if (isNaN(minesX)) {
                return;
            }

            var width = Number(widthX);
            var height = Number(heightX);
            var mines = Number(minesX);

            if (width < 5) {
                document.getElementById("width").value = 5
                width = 5;
            }

            if (width > MAX_WIDTH) {
                document.getElementById("width").value = MAX_WIDTH;
                width = MAX_WIDTH;
            }

            if (height < 5) {
                document.getElementById("height").value = 5
                height = 5;
            }

            if (height > MAX_HEIGHT) {
                document.getElementById("height").value = MAX_HEIGHT;
                height = MAX_HEIGHT;
            }

            if (mines < 1) {
                document.getElementById("mines").value = 1;
                mines = 1;
            }

            if (mines > width * height - 1) {
                document.getElementById("mines").value = width * height - 1;
                mines = width * height - 1;
            }

            doNewGame(width, height, mines);

        }

        function doNewGame(width, height, mines) {

            if (document.getElementById("useSeed").checked) {
                newGame(width, height, mines, document.getElementById("seed").value);
            } else {
                newGame(width, height, mines, 0);
            }


        }

    </script>

</body>




</html>